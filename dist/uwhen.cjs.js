"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports[Symbol.toStringTag]="Module";var e=new Set;function t(t,n){var o=new Set;function r(){document.querySelectorAll(t).forEach((function(r){if(!o.has(r)){o.add(r);var c=n(r),i="function"==typeof c?c:function(){};!function(t,n,o){function r(){n&&document.contains(n)&&n.matches(t)||(e.delete(r),o())}setTimeout(r),e.add(r)}(t,r,(function(){o.delete(r),i()}))}}))}setTimeout(r),e.add(r)}new window.MutationObserver((function(){e.forEach((function(e){return e()}))})).observe(document,{attributes:!0,childList:!0,subtree:!0});var n="function"==typeof Promise?Promise:function(e){let t,n=[],o=0;return e((e=>{t=e,o=1,n.splice(0).forEach(r)})),{then:r};function r(e){return o?setTimeout(e,0,t):n.push(e),this}};const o=e=>{const{$:t,r:n,h:o}=e;u(n)&&(r.get(o).delete(e),n()),u(e.r=t())&&r.get(o).add(e)},r=new WeakMap,c=[],i=[],u=e=>"function"==typeof e,s=e=>{const t={h:n,c:null,a:null,e:0,i:0,s:[]};return n;function n(){t.e=t.i=0;try{return e.apply(t.c=this,t.a=arguments)}finally{c.length&&a.then(c.forEach.bind(c.splice(0),o)),i.length&&i.splice(0).forEach(o)}}},a=new n((e=>e()));exports.when=(e,n)=>{t(e,(e=>{const t=[...e.childNodes],o={};for(const n of e.attributes)o[[n.name]]=n.value;const c=s((()=>n(e,o,t)));return c(),()=>{(e=>r.has(e))(c)&&(e=>{const t=r.get(e);t&&a.then((()=>{t.forEach((e=>{e.r(),e.r=null})),t.clear()}))})(c)}}))};

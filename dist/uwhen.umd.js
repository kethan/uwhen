(function(o,n){typeof exports=="object"&&typeof module!="undefined"?module.exports=n():typeof define=="function"&&define.amd?define(n):(o=typeof globalThis!="undefined"?globalThis:o||self,o.uwhen=n())})(this,function(){"use strict";const o=new Set,n=new Map;new window.MutationObserver(i=>{for(const t of i)if(t.type==="attributes"){const{target:u,attributeName:e,oldValue:r}=t;if(n.has(u)){let[c,s]=n.get(u);if(s.includes(e)||s.length==0){const d=u.getAttribute(e);c(e,r,d,u)}}}o.forEach(t=>t())}).observe(document,{attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0});function a(i,t){setTimeout(u),o.add(u);function u(){document.querySelectorAll(i).forEach(e=>{if(!n.has(e)){const{connected:r=()=>{},disconnected:c=()=>{},attributeChanged:s=()=>{},observedAttributes:d=[]}=t(e);n.set(e,[s,d]),r(),f(i,e,()=>c())}})}}function f(i,t,u){setTimeout(e),o.add(e);function e(){t&&document.contains(t)&&t.matches(i)||(n.delete(t),o.delete(e),u())}}return a});
